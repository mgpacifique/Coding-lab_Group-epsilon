#!/bin/bash
# log files
logs=(" heart_rate_log.log" "temperature_log.log" "water_usage_log.log")
# menu
echo "choose a running log file to archive:"
echo "1) Heart Rate (heart_rate_log.log)"
echo "2) Temperature (temperature_log.log)"
echo "3) Water usage (water_usage_log.log)"
read -p "Enter choice (1-3): " choice

# validate
if ! [[ "$choice" =~ ^[1-3]$ ]]; then
        echo "error . please enter 1, 2, or 3."
        exit 1
fi
log_file="${logs[$((choice-1))]}"
# checking if the log file exists
if [ ! -f "$log-file" ]; then
        echo "log file $log_file does not exist."
        exit 1
fi

# report header
timestamp=$(date +"%Y-%m-%d %H:%M:%S")
report="reports/analysis_report.txt"
echo -e "\n--Analysis Report: $log_file @ $timestamp --" >> "$report"

#count
awk '{print $2}' "$log_file" | sort | uniq -c | while read count device; do
 echo "Device: $device | count: >> "$report"

#first and last timestamps
First=$(grep "$device" "$log_file" | head -n 1 | awk '{print $1}')
Last=$(grep "$device" "$log_file" | tail -n 1 | awk '{print $1}')
echo "  First seen: $first" >> "$report"
echo "  Last seen: $last" >> "$report"
done
echo "Analysis complete. Results appended to $report"
+250790139822
